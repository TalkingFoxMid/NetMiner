[img_src](dhcp_header.png)
DHCP ведёт таблицу выделенных IP-адресов, чтобы избежать дублирования.
Если клиент не имеет IP адреса, он отправляет широковещательный запрос DISCOVER (по MAC), чтобы понять, есть ли в подсети DHCP сервер.
Этапы DHCP:
DISCOVER — широковещательный поиск DHCP в подсети
OFFER IP — сервер предлагает IP адресс
REQUEST IP — сервер соглашается на данный IP.
ACK IP — сервер подтверждает, что клиент может поставить этот IP.
Также может быть NACK IP, если REQUEST IP вернёт искажённый IP.
IP адресс выделяется на время. Для обновления аренды производится запрос от клиента вроде REQUEST IP, а потом ответ ACK IP от сервера.
IP может быть выделен тремя разными способами: фиксировано по MAC адресу установлен, динамически через, через пул адресов DHCP с соблюдением уникальности.
RELEASE для освобождения.